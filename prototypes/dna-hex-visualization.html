<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNA Hex Grid Visualization</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a2e;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: monospace;
        }
        canvas {
            border: 2px solid #444;
            background: #0f0f1e;
        }
    </style>
</head>
<body>
    <canvas id="dna-canvas" width="800" height="400"></canvas>

    <script>
        const canvas = document.getElementById('dna-canvas');
        const ctx = canvas.getContext('2d');

        // Hex grid parameters
        const hexSize = 40;
        const hexWidth = hexSize * 2;
        const hexHeight = Math.sqrt(3) * hexSize;

        // Nucleotide colors
        const colors = {
            'A': '#ef4444',
            'T': '#3b82f6',
            'G': '#10b981',
            'C': '#f59e0b'
        };

        // DNA sequence
        const topStrand = ['A', 'C', 'G', 'T'];
        const bottomStrand = ['T', 'G', 'C', 'A'];

        // Draw a hexagon
        function drawHex(x, y, size, fillColor, strokeColor = '#ffffff', lineWidth = 2) {
            ctx.beginPath();
            for (let i = 0; i < 6; i++) {
                const angle = (Math.PI / 3) * i - Math.PI / 2;
                const hx = x + size * Math.cos(angle);
                const hy = y + size * Math.sin(angle);
                if (i === 0) {
                    ctx.moveTo(hx, hy);
                } else {
                    ctx.lineTo(hx, hy);
                }
            }
            ctx.closePath();
            
            if (fillColor) {
                ctx.fillStyle = fillColor;
                ctx.fill();
            }
            
            ctx.strokeStyle = strokeColor;
            ctx.lineWidth = lineWidth;
            ctx.stroke();
        }

        // Draw text in hex
        function drawText(x, y, text, color = '#ffffff', size = '20px') {
            ctx.fillStyle = color;
            ctx.font = `bold ${size} monospace`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(text, x, y);
        }

        // Draw X linkage
        function drawXLinkage(x, y, size) {
            ctx.strokeStyle = '#888888';
            ctx.lineWidth = 3;
            
            const offset = size * 0.5;
            
            // Draw X
            ctx.beginPath();
            ctx.moveTo(x - offset, y - offset);
            ctx.lineTo(x + offset, y + offset);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(x + offset, y - offset);
            ctx.lineTo(x - offset, y + offset);
            ctx.stroke();
        }

        // Calculate hex positions for horizontal arrangement
        function getHexPosition(col, row) {
            const x = 150 + col * (hexWidth * 0.75);
            const y = 100 + row * hexHeight;
            return { x, y };
        }

        // Draw the DNA structure
        function drawDNA() {
            // Clear canvas
            ctx.fillStyle = '#0f0f1e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw top strand (row 0)
            topStrand.forEach((base, i) => {
                const pos = getHexPosition(i, 0);
                drawHex(pos.x, pos.y, hexSize, colors[base], '#ffffff', 2);
                drawText(pos.x, pos.y, base, '#ffffff', '20px');
            });

            // Draw middle row linkages (row 1)
            topStrand.forEach((base, i) => {
                const pos = getHexPosition(i, 1);
                drawHex(pos.x, pos.y, hexSize, '#1a1a2e', '#666666', 1);
                drawXLinkage(pos.x, pos.y, hexSize * 0.4);
            });

            // Draw bottom strand (row 2)
            bottomStrand.forEach((base, i) => {
                const pos = getHexPosition(i, 2);
                drawHex(pos.x, pos.y, hexSize, colors[base], '#ffffff', 2);
                drawText(pos.x, pos.y, base, '#ffffff', '20px');
            });

            // Draw directional labels
            const firstTop = getHexPosition(0, 0);
            const lastTop = getHexPosition(topStrand.length - 1, 0);
            const firstBottom = getHexPosition(0, 2);
            const lastBottom = getHexPosition(bottomStrand.length - 1, 2);

            ctx.fillStyle = '#00ff88';
            ctx.font = 'bold 16px monospace';
            
            // Top strand: 3' on left, 5' on right
            drawText(firstTop.x - hexSize - 10, firstTop.y, "3'", '#00ff88', '16px');
            drawText(lastTop.x + hexSize + 10, lastTop.y, "5'", '#00ff88', '16px');
            
            // Bottom strand: 5' on left, 3' on right
            drawText(firstBottom.x - hexSize - 10, firstBottom.y, "5'", '#00ff88', '16px');
            drawText(lastBottom.x + hexSize + 10, lastBottom.y, "3'", '#00ff88', '16px');

            // Add title
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 24px monospace';
            ctx.textAlign = 'center';
            ctx.fillText('DNA Double Strand - Hex Grid Representation', canvas.width / 2, 30);

            // Add legend
            ctx.font = '14px monospace';
            ctx.textAlign = 'left';
            ctx.fillText('Top row: Nucleotides (3\' → 5\')', 20, canvas.height - 60);
            ctx.fillText('Middle row: Hydrogen bond linkages (╳)', 20, canvas.height - 40);
            ctx.fillText('Bottom row: Complementary nucleotides (5\' → 3\')', 20, canvas.height - 20);
        }

        // Draw the visualization
        drawDNA();
    </script>
</body>
</html>
