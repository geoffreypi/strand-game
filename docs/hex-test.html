<!DOCTYPE html>
<html>
<head>
    <title>Hex Grid Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a2e;
            color: #fff;
            font-family: monospace;
        }
        svg {
            border: 1px solid #00ff88;
            background: #0f3460;
        }
        .info {
            margin: 20px 0;
            padding: 10px;
            background: #16213e;
            border: 1px solid #00ff88;
        }
    </style>
</head>
<body>
    <h1>Hex Grid Alignment Test</h1>
    <div class="info">
        <p>Hex parameters:</p>
        <p>Size (radius): <span id="size">30</span></p>
        <p>Width: <span id="width"></span></p>
        <p>Height: <span id="height"></span></p>
        <p>Horizontal spacing: <span id="horiz"></span></p>
        <p>Vertical spacing: <span id="vert"></span></p>
    </div>

    <svg id="hexgrid" width="800" height="600" viewBox="0 0 800 600"></svg>

    <script>
        const size = 30; // hex radius
        const width = 2 * size; // 60
        const height = Math.sqrt(3) * size; // ~52
        const horizSpacing = width * 3/4; // 45
        const vertSpacing = height; // ~52

        document.getElementById('size').textContent = size;
        document.getElementById('width').textContent = width.toFixed(2);
        document.getElementById('height').textContent = height.toFixed(2);
        document.getElementById('horiz').textContent = horizSpacing.toFixed(2);
        document.getElementById('vert').textContent = vertSpacing.toFixed(2);

        const svg = document.getElementById('hexgrid');
        const centerX = 400;
        const centerY = 300;

        // Function to create a hex polygon points string (flat-top orientation)
        function hexPoints(cx, cy, size) {
            const points = [];
            for (let i = 0; i < 6; i++) {
                // Flat-top hex: vertices at 30, 90, 150, 210, 270, 330 degrees
                const angle = (Math.PI / 3) * i + Math.PI / 6;
                const x = cx + size * Math.cos(angle);
                const y = cy + size * Math.sin(angle);
                points.push(`${x.toFixed(2)},${y.toFixed(2)}`);
            }
            return points.join(' ');
        }

        // Axial to pixel conversion for flat-top hexes
        function axialToPixel(q, r) {
            const x = size * (Math.sqrt(3) * q + Math.sqrt(3)/2 * r);
            const y = size * (3/2 * r);
            return { x: centerX + x, y: centerY + y };
        }

        // Create hex grid
        const hexes = [
            { q: 0, r: 0, label: '(0,0)' },
            { q: 1, r: -1, label: '(1,-1)' },
            { q: 1, r: 0, label: '(1,0)' },
            { q: 0, r: 1, label: '(0,1)' },
            { q: -1, r: 1, label: '(-1,1)' },
            { q: -1, r: 0, label: '(-1,0)' },
            { q: 0, r: -1, label: '(0,-1)' }
        ];

        hexes.forEach(hex => {
            const pos = axialToPixel(hex.q, hex.r);

            // Draw hex
            const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
            polygon.setAttribute('points', hexPoints(pos.x, pos.y, size));
            polygon.setAttribute('fill', '#0f3460');
            polygon.setAttribute('stroke', '#00ff88');
            polygon.setAttribute('stroke-width', '2');
            svg.appendChild(polygon);

            // Draw label
            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.setAttribute('x', pos.x);
            text.setAttribute('y', pos.y + 5);
            text.setAttribute('text-anchor', 'middle');
            text.setAttribute('fill', '#88ddff');
            text.setAttribute('font-size', '12');
            text.textContent = hex.label;
            svg.appendChild(text);
        });

        // Draw title
        const title = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        title.setAttribute('x', 400);
        title.setAttribute('y', 30);
        title.setAttribute('text-anchor', 'middle');
        title.setAttribute('fill', '#ffffff');
        title.setAttribute('font-size', '20');
        title.setAttribute('font-weight', 'bold');
        title.textContent = 'Hex Grid - Proper Honeycomb';
        svg.appendChild(title);
    </script>
</body>
</html>
